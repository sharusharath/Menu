<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="css/style.css"> -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://d1jougtdqdwy1v.cloudfront.net/css/widgetBootstrap/widgetBootstrap.css">
    <link rel="stylesheet" href="https://d1jougtdqdwy1v.cloudfront.net/css/5.2.3/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <script type="text/javascript" src="https://d1jougtdqdwy1v.cloudfront.net/js/5.2.3/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="js/jquery-3.7.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
</head>
<body class="make_inwidget_redesign">
    <!-- Button trigger modal -->
<!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#prequalDesktopModal">
    Launch static backdrop modal
  </button>


  <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#prequalMobileOffcanvas" aria-controls="staticBackdrop">
    Toggle static offcanvas
  </button> -->
  
  
  
   <!-- Modal -->
   <section class="prequalDesktopModalContainerModal">
    <div class="modalPrequal" id="prequalDesktopModal">
            <div class="modal-header-prequal">
              <button id="extraFocus" style="position: absolute; opacity: 0; pointer-events: none;" tabindex="-1">Hidden</button>

                <h1 class="modal-title-prequal Container-title" id="staticBackdropLabel">Credit Estimator <span><img src="" alt="" id="makeImgPrequal"></span></h1>
				
            </div>
            <div class="widget-modal-body">
                <div class="form-body">
                    <form action="/estimate" method="POST" id="estimator-form">
					<input type="hidden" id="make" name="make" value="jeep">
			        <input type="hidden" id="analytics_payload" name="analytics_payload" value="">
                    <p class="form-title">Fill out the following form to get an estimated max monthly payment and loan amount</p> 
                        <div class="widget-row">
                            
                            <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                <label for="">First Name<span class="mandat">*</span></label>
                                <input type="text" class="widget-form-control form-field" id="firstname" name="first-name" autocomplete="off" value="">
                                <small class="error-message" id="firstname-error"></small>
                            </div>
                            <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                <label for="">Last Name<span class="mandat">*</span></label>
                                <input type="text" class="widget-form-control form-field" id="lastname" name="last-name" autocomplete="off" value="">
                                <small class="error-message" id="lastname-error"></small>
                            </div>
                            <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                <label for="">Email<span class="mandat">*</span></label>
                                <input type="text" class="widget-form-control form-field" id="email" name="email" autocomplete="off" value="">
                                <small class="error-message" id="useremail-error"></small>
                            </div>
                        <!-- </div> -->
                        <!-- <div class="row"> -->
                            <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                <label for="">Phone<span class="mandat">*</span></label>
                                <input type="text" maxlength="14" class="widget-form-control form-field" id="phone" name="phone" autocomplete="off">
                                <small class="error-message" id="phone-error"></small>
                            </div>
                            <div class="widget-col-lg-12 widget-col-md-12 widget-col-sm-12">
                                <label for="">Address<span class="mandat">*</span></label>
                                <input type="text" class="widget-form-control form-field" id="address" name="address" autocomplete="off" placeholder="apartment no, street name">
                                <small class="error-message" id="address-error"></small>
                            </div>
                            <!-- <div class="col-lg-4 col-md-6 col-sm-6">
                                <label for="">Address Line 2 </label>
                                <input type="text" class="form-control form-field" id="addressline2" name="addressline2"  autocomplete="off">
                                <small class="error-message"></small>
                            </div> -->
                        <!-- </div> -->
                        <!-- <div class="row"> -->
                            <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                <label for="">City<span class="mandat">*</span></label>
                                <input type="text" class="widget-form-control form-field" id="city" name="city"  autocomplete="off">
                                <small class="error-message" id="city-error"></small>
                            </div>
                            </div>
                            <div class="widget-row">
                                <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                    <label for="">State<span class="mandat">*</span></label>
                                    <input type="text" class="widget-form-control form-field" id="state" name="state"  autocomplete="off">
                                    <small class="error-message" id="state-error"></small>
                                </div>
                                <div class="widget-col-lg-6 widget-col-md-6 widget-col-sm-6">
                                    <label for="">ZIP Code<span class="mandat">*</span></label>
                                    <input type="tel" id="zipcode" name="zipcode" class="widget-form-control form-field" autocomplete="off" maxlength="5" value="">
                                    <small class="error-message" id="zipcode-error"></small>
                                </div>
                            <!-- <div class="col-lg-4 col-md-4 col-sm-6">
                                <label for="">Pre Tax Monthly Income <span class="mandat">*</span></label>
                                <input type="number" id="income" name="income" min="0" class="form-control form-field" autocomplete="off">
                                <small class="error-message" id="income-error"></small>
                            </div> -->
                            </div>
                        <span class="noteText">Note: This will not affect your credit score.</span>
                        <div class="modal-footer-form">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="landscapeCheck">
                                <label class="form-check-label termsCheck" for="landscapeCheck">
                                    I certify I am providing my consent to Offerlogix to obtain my credit score to use in connection with a potential credit transaction. I understand that by giving my consent, my credit score will be accessed by Offerlogix via a “soft pull” and understand that this soft pull will not impact my credit score.
                                </label>
                            </div>
                            <button type="button" class="widget-btn estimateBtn" id="estimateBtn" tabindex="0">See my estimate</button>
                        </div>
                    </form>

                </div>
            </div>
    </div>
</section>
<!-- Modal End -->

<script>
  // Add this code at the end of your credit-form.html file or in a separate JavaScript file

document.addEventListener('DOMContentLoaded', function() {
    // First, let's add the result modal HTML to the page
    const resultModalHTML = `
    <div class="modalResult" id="prequalDesktopModalResult" style="display: none;">
        <div class="widget-modal-header">
            <h1 class="modal-title Container-title" id="staticBackdropLabel">Credit Estimator <span> <img src="" alt="" id="makeImgPrequalResult"></span></h1>
        </div>
        <div class="widget-modal-body">
            <div class="form-body">
                <!-- CREDIT METER START -->
                <form action="" id="estimator-score-container">
                    <div class="widget-row widget-justify-content-center credit-meter">
                        <canvas id="creditmeter"></canvas>
                    </div>
                    <div class="widget-row score-container">
                        <p class="credit-score">800 - 850</p>
                        <p class="estimateTxt">Your credit estimates are:</p>
                        <p class="estimateRating">Excellent</p>
                    </div>
                    <div class="widget-row note-score-container">
                        <p class="note-credit-score">This estimation is provided as a range and does not affect your actual credit score.</p>
                    </div>
                    <div class="modal-footer-form widget-text-center">
                        <div class="ctasection">
                            <button type="button" class="widget-btn backcta" id="backToForm"><i class="bi bi-chevron-left"></i>back</button>
                            <button type="button" class="widget-btn backcta">proceed<i class="bi bi-chevron-right"></i></button>
                        </div>
                    </div>
                </form>
                <!-- CREDIT METER END -->
            </div>
        </div>
    </div>`;
    
    // Add the results modal to the page
    document.querySelector('.prequalDesktopModalContainerModal').insertAdjacentHTML('beforeend', resultModalHTML);
    
    // Get references to both modals
    const formModal = document.getElementById('prequalDesktopModal');
    const resultModal = document.getElementById('prequalDesktopModalResult');
    
    // Get reference to the buttons
    const estimateBtn = document.getElementById('estimateBtn');
    const backBtn = document.getElementById('backToForm');
    
    // Handle "See my estimate" button click
    estimateBtn.addEventListener('click', function(event) {
        event.preventDefault();
        
        // Hide form modal and show result modal
        formModal.style.display = 'none';
        resultModal.style.display = 'block';
        
        // Update image in result modal based on body class
        changeImageForResultModal();
        
        // Initialize the credit meter
        initCreditMeter();
    });
    
    // Handle back button click
    backBtn.addEventListener('click', function() {
        resultModal.style.display = 'none';
        formModal.style.display = 'block';
    });
    
    // Function to change image in result modal
    function changeImageForResultModal() {
        const bodyClass = document.body.className;
        const imageElement = document.getElementById('makeImgPrequalResult');
        
        // Set image source based on body class (same logic as your existing function)
        if (bodyClass === 'make_alfa') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_alfa_prequal.svg';
        } else if (bodyClass === 'make_jeep') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_jeep_prequal.svg';
        } else if (bodyClass === 'make_ram') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_ram_prequal.svg';
        } else if (bodyClass === 'make_dodge') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_dodge_prequal.svg';
        } else if (bodyClass === 'make_chrysler') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_chrysler_prequal.svg';
        } else if (bodyClass === 'make_fiat') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_fiat_prequal.svg';
        } else if (bodyClass === 'make_inwidget_redesign') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/inwidget_redesign.svg';
        } else if (bodyClass === 'make_spoticar') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/car_spoticar.svg';
        } else if (bodyClass === 'make_chryslerconnect') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/car_chrysler-connect.svg';
        } else if (bodyClass === 'make_widget') {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/Car_alfa_prequal.svg';
        } else {
            imageElement.src = 'https://d1jougtdqdwy1v.cloudfront.net/dealeradmin/images/inwidget_redesign.svg';
        }
    }
    
    // Initialize the credit meter function (copied from your credit-result.html)
    function initCreditMeter() {
        const bodyClass = document.body.className;
        
        // Default fill color
        let fillColor = '#000000';
        let fontFamily = 'Roboto';
        
        // Set color based on body class
        switch (bodyClass) {
            case 'make_inwidget_redesign':
                fillColor = '#F2B54A';  
                fontFamily = 'Montserrat';
                break;
            case 'make_chrysler':
                fillColor = '#3a57a0';  
                fontFamily = 'Roboto';
                break;
            case 'make_dodge':
                fillColor = '#d50000';  
                fontFamily = 'Roboto';
                break;
            case 'make_jeep':
                fillColor = '#1E4544';  
                fontFamily = 'Roboto';
                break;
            case 'make_ram':
                fillColor = '#880d00';  
                fontFamily = 'Roboto';
                break;
            case 'make_fiat':
                fillColor = '#e70000';  
                fontFamily = 'Roboto';
                break;
            case 'make_alfa':
                fillColor = '#8f192b'; 
                fontFamily = 'Roboto';
                break;
            case 'make_spoticar':
                fillColor = '#10cfc8'; 
                fontFamily = 'Roboto';
                break;
            case 'make_chryslerconnect':
                fillColor = '#063E77'; 
                fontFamily = 'Roboto';
                break;
            case 'make_widget':
                fillColor = '#8F192B'; 
                fontFamily = 'Roboto';
                break;
            default:
                fillColor = '#000000';
                fontFamily = 'Roboto';
        }
        
        // Begin the credit meter animation
        // This calls the animation function that's already in your credit-result.html
        if (typeof animateCredit === 'function') {
            animateCredit();
        } else {
            // If the function doesn't exist yet, we need to add the credit meter code
            // You can insert the entire credit meter code here or call it from a separate file
            const canvas = document.getElementById('creditmeter');
            const ctx = canvas.getContext('2d');
            const targetValue = 800;
            const animationSpeed = 2;
            const trackColor = '#cccccc';
            const needleColor = '#000';
            const fontSize = '16px';
            const fontWeight = '800';
            
            // Define credit score range
            const minValue = 300;
            const maxValue = 850;
            const increment = 50;
            
            let currentValue = 300;
            
            // The rest of your credit meter code would go here...
            // For brevity, I'm not duplicating all of it, but in your implementation
            // you should include the full functions from credit-result.html
            
            // Start the animation
            animateCredit();
        }
    }
});


</script>




</body>
</html>